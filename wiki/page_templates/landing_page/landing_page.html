{{IGEM_TopBar}}
<html>
    <head>
        <!-- warp.js -->
        <script src="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/js/warp.js&action=raw&ctype=text/javascript"></script>

        <!-- landscape_embedded_svgs.js -->
        <script src="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/js/landscape_embedded_svgs.js&action=raw&ctype=text/javascript"></script>

        <!-- remove_igem_presets.css -->
        <link rel="stylesheet" type="text/css" href="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/css/remove_igem_presets.css&action=raw&ctype=text/css">

        <!-- global_basic.css -->
        <link rel="stylesheet" type="text/css" href="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/css/global_basic.css&action=raw&ctype=text/css">

        <style real-href="main.css">
            #pagecontent{
                height:auto;
                width:100%;
                /*font used by igem on the wiki wrapper*/
                font:sans-serif;
                display:grid;
                grid-template-columns: 100%;
                grid-template-rows: 100vh auto 100vh 120vh 100vh;
                transition: 0.1s filter;
            }

            .reference_image,.real,.panel{
                width:100%;
                /* NEVER EVER CHANGE THIS TO 100%! height in percent of certain elements is broken on the igem page. ONLY VH WORKS CONSISTENTLY CORRECTLY! (as long as there is no horizontal scroll bar) */
                height:100vh;
            }
            .panel{
                position:relative;
            }
            .panel > *{
                position:absolute;
                overflow:hidden;
            }
            /*applies to all divs with an onmouseenter event handler*/
            #pagecontent div[onmouseenter]{
                cursor:pointer;
            }
        </style>

        <!-- panel1.css -->
        <link rel="stylesheet" type="text/css" href="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/css/panel1.css&action=raw&ctype=text/css">
        <!-- panel2.css -->
        <link rel="stylesheet" type="text/css" href="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/css/panel2.css&action=raw&ctype=text/css">
        <!-- panel3.css -->
        <link rel="stylesheet" type="text/css" href="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/css/panel3.css&action=raw&ctype=text/css">

        <!-- scroll_progress_tracker.css -->
        <link rel="stylesheet" type="text/css" href="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/css/scroll_progress_tracker.css&action=raw&ctype=text/css">

        <!-- loading_screen.css -->
        <link rel="stylesheet" type="text/css" href="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/css/loading_screen.css&action=raw&ctype=text/css">
        
        <!-- general purpose js -->
        <script src="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/js/general_purpose.js&action=raw&ctype=text/javascript"></script>
        
        <!-- undo_igem_bs.js -->
        <script src="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/js/undo_igem_bs.js&action=raw&ctype=text/javascript"></script>

        <!-- navigation_bar.css -->
        <link rel="stylesheet" type="text/css" href="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/css/navigation_bar.css&action=raw&ctype=text/css">
        <!-- navigation_bar.js -->
        <script src="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/js/navigation_bar.js&action=raw&ctype=text/javascript"></script>

        <script purpose="on_load_code">
            /*
            clean up the existing stuff that is nothing but in the way of our page design (top bar with igem logo and navigation panel hidden behind a burger menu, and quite thick padding on the left and top of the screen)
            */
            const framerate=60 /*frames per second*/
            const add_stuff_to_petri_dish_duration=2.7 /*seconds*/
            const animation_steps=4 /*add tissue to plate, then add fgf2 to plate, then grow steak, then move steak*/
                
            function on_load(){
                undo_igem_bs()

                //after the page has loaded, provide some additional time for all of the javascript to run, then actually remove the loading screen overlay
                setTimeout(()=>{
                    undo_igem_bs()
                    setTimeout(()=>{
                        document.getElementById("loading_overlay").style="display:none;"
                    },200)
                },1000)

                hide_meat_problem_areas()

                var start_time=Date.now()/1000
                var last_time=Date.now()/1000
                function step_animations(){
                    var current_time=Date.now()/1000

                    let step=current_time-last_time
                    let total_time=current_time-start_time

                    tissue_animation(step)
                    if(total_time>(add_stuff_to_petri_dish_duration)){
                        fgf2_animation(step)
                    }
                    if(total_time>(add_stuff_to_petri_dish_duration*2)){
                        steak_animation(step)
                    }

                    last_time=current_time

                    requestAnimationFrame(step_animations)
                }
                requestAnimationFrame(step_animations)

                highlight_current_topic_in_navbar()
            }
        </script>
    </head>
    <body onload="on_load()" onresize="scale_steak()">
        <!-- cross-page loading screen -->
        <div id="loading_overlay">
            <div id="loading_icon">
                <img src="https://2021.igem.org/wiki/images/7/76/T--Uppsala--logo_animated.gif">
                <div style="font-size:3vh;text-align:center;padding-top:4vh;font-family: sans-serif;">LOADING</div>
            </div>
        </div>
        <!-- cross-page Navigation Menu with drop down -->
        {{navigation_bar.html}}
        <!-- navigation_bar_immediate.js -->
        <script src="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/js/navigation_bar_immediate.js&action=raw&ctype=text/javascript"></script>

        <!-- landing page main content -->
        <main id="pagecontent">
            <div class="panel">
                {{panel1.html}}
            </div>
            <div class="intermediate_text header" style="background-color:#8cb29f;">
                Current problems regarding meat production:
            </div>
            <div class="panel">
                {{panel2.html}}
                
                <!-- panel2_issue_text_expand.js -->
                <script src="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/js/panel2_issue_text_expand.js&action=raw&ctype=text/javascript"></script>
            </div>
            <div class="panel" style="background-color:#CCE0DD; height:auto;">
                {{panel3.html}}
            </div>
            <div class="panel" style="background-color:#CCE0DD">
                {{panel4.html}}
            </div>

            <!-- landing-page specific scrolling things at bottom of screen-->
            <div class="scroll_thing">
                <img src="https://2021.igem.org/wiki/images/e/ef/T--Uppsala--logo_cow_head.svg"  loading="lazy">
            </div>
            <div class="scroll_thing">
                <img src="https://2021.igem.org/wiki/images/e/e9/T--Uppsala--logo_flask.svg" id="logo_flask"  loading="lazy">
            </div>

            <!-- scroll_progress_tracker.js -->
            <script src="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/js/scroll_progress_tracker.js&action=raw&ctype=text/javascript"></script>
        </main>

        <!-- panel2_scale_steak.js -->
        <script src="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/js/panel2_scale_steak.js&action=raw&ctype=text/javascript"></script>
        <!-- panel1_grass_waving_animation.js -->
        <script src="https://2021.igem.org/wiki/index.php?title=Template:Uppsala/js/panel1_grass_waving_animation.js&action=raw&ctype=text/javascript"></script>
    </body>
</html>