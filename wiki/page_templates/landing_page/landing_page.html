{{IGEM_TopBar}}
<html>
    <head>
        <script src="https://cdn.jsdelivr.net/npm/warpjs@1.0.8/dist/warp.js"></script>
        <script purpose="js_mutable_svg">
            {{landscape_embedded_svgs.js}}
        </script>
        <style real-href="remove_presets.css">
            {{remove_igem_presets.css}}
        </style>
        <style purpose="global">
            {{global_basic.css}}
        </style>
        <style real-href="main.css">
            #fgfuture_main{
                height:auto;
                width:100%;
                /*font used by igem on the wiki wrapper*/
                font:sans-serif;
                display:grid;
                grid-template-columns: 100%;
                grid-template-rows: 100vh auto 100vh 120vh 100vh;
                transition: 0.1s filter;
            }

            .reference_image,.real,.panel{
                width:100%;
                /* NEVER EVER CHANGE THIS TO 100%! height in percent of certain elements is broken on the igem page. ONLY VH WORKS CONSISTENTLY CORRECTLY! (as long as there is no horizontal scroll bar) */
                height:100vh;
            }
            .panel{
                position:relative;
            }
            .panel > *{
                position:absolute;
                overflow:hidden;
            }
            /*applies to all divs with an onmouseenter event handler*/
            #fgfuture_main div[onmouseenter]{
                cursor:pointer;
            }
        </style>
        <style real-href="main_1.css">
            {{panel1.css}}
        </style>
        <style real-href="main_2.css">
            {{panel2.css}}
        </style>
        <style real-href="main_3.css">
            {{panel3.css}}
        </style>
        <style real-href="scrolling.css">
            {{scroll_progress_tracker.css}}
        </style>

        <!-- cross-page loading screen -->
        {{loading_screen.css}}
        
        <script purpose="general purpose functions">
            function and(a,b){if(a){ if(b){return true;} } return false;}
            function min(a,b){return (a<b)?a:b}
            function max(a,b){return (a>b)?a:b}
        </script>

        <script purpose="undo_igem_bs.js">
            {{undo_igem_bs.js}}
        </script>
        <script purpose="on_load_code">
            /*
            clean up the existing stuff that is nothing but in the way of our page design (top bar with igem logo and navigation panel hidden behind a burger menu, and quite thick padding on the left and top of the screen)
            */
            const framerate=60 /*frames per second*/
            const add_stuff_to_petri_dish_duration=2.7 /*seconds*/
            const animation_steps=4 /*add tissue to plate, then add fgf2 to plate, then grow steak, then move steak*/
                
            function on_load(){
                undo_igem_bs()

                //after the page has loaded, provide some additional time for all of the javascript to run, then actually remove the loading screen overlay
                setTimeout(()=>{
                    undo_igem_bs()
                    setTimeout(()=>{
                        document.getElementById("loading_overlay").style="display:none;"
                    },200)
                },1000)

                hide_meat_problem_areas()

                var start_time=Date.now()/1000
                var last_time=Date.now()/1000
                function step_animations(){
                    var current_time=Date.now()/1000

                    let step=current_time-last_time
                    let total_time=current_time-start_time

                    tissue_animation(step)
                    if(total_time>(add_stuff_to_petri_dish_duration)){
                        fgf2_animation(step)
                    }
                    if(total_time>(add_stuff_to_petri_dish_duration*2)){
                        steak_animation(step)
                    }

                    last_time=current_time

                    requestAnimationFrame(step_animations)
                }
                requestAnimationFrame(step_animations)

                highlight_current_topic_in_navbar()
            }
        </script>

        <!-- cross-page navigation bar -->
        <style real-href="navigation_bar">
            {{navigation_bar.css}}
        </style>
        <script purpose="internal_open_close_navbar">
            {{navigation_bar_landing_page.js}}
        </script>
    </head>
    <body onload="on_load()" onresize="scale_steak()">
        <!-- cross-page loading screen -->
        <div id="loading_overlay">
            <div id="loading_icon">
                <img src="https://2021.igem.org/wiki/images/7/76/T--Uppsala--logo_animated.gif">
                <div style="font-size:3vh;text-align:center;padding-top:4vh;font-family: sans-serif;">LOADING</div>
            </div>
        </div>
        <!-- cross-page Navigation Menu with drop down -->
        {{navigation_bar.html}}

        <!-- landing page main content -->
        <main id="fgfuture_main">
            <div class="panel">
                {{panel1.html}}
            </div>
            <div class="intermediate_text header" style="background-color:#8cb29f;">
                Current problems regarding meat production:
            </div>
            <div class="panel">
                {{panel2.html}}
                <script purpose="hover_expand_problem_information">
                    {{panel2_issue_text_expand.js}}
                </script>
            </div>
            <div class="panel" style="background-color:#CCE0DD; height:auto;">
                {{panel3.html}}
            </div>
            <div class="panel" style="background-color:#CCE0DD">
                {{panel4.html}}
            </div>

            <!-- landing-page specific scrolling things at bottom of screen-->
            <div class="scroll_thing">
                <img src="https://2021.igem.org/wiki/images/e/ef/T--Uppsala--logo_cow_head.svg"  loading="lazy">
            </div>
            <div class="scroll_thing">
                <img src="https://2021.igem.org/wiki/images/e/e9/T--Uppsala--logo_flask.svg" id="logo_flask"  loading="lazy">
            </div>

            <script purpose="scrolling_icons_screen_bottom">
                {{scroll_progress_tracker.js}}
            </script>
        </main>
        <!-- landing page specific code used to scale some js-dependent stuff -->
        <script purpose="rescaling_code">
            {{panel2_scale_steak.js}}
        </script>
        <script purpose="grass_animation">
            {{panel1_grass_waving_animation.js}}
        </script>
    </body>
</html>