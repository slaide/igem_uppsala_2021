<!doctype html>
<html>
    <head>
        <meta charset="utf8">
        <script src="https://cdn.jsdelivr.net/npm/warpjs@1.0.8/dist/warp.js"></script>
        <script src="svg_landing_page_images.js"></script>
        <link rel="stylesheet" href="main.css">
        <link rel="stylesheet" href="main_1.css">
        <link rel="stylesheet" href="main_2.css">
        <link rel="stylesheet" href="mockup.css">
    </head>
    <body>
        <main>
            <div class="panel">
                <img class="reference_image" src="IMG_0968.PNG"/>
                <div class="real">
                    <div id="grass_front"></div>
                    <div id="grass_front_middle_fill"></div>
                    <div id="cow_left"></div>
                    <div id="grass_middle"></div>
                    <div id="grass_middle_back_fill"></div>
                    <div id="cow_right"></div>
                    <div id="grass_back"></div>
                    <div id="mountain_back"></div>
                    <div id="mountain_middle"></div>
                    <div id="mountain_front"></div>
                </div>
            </div>
            <div class="panel">
                <img class="reference_image" src="IMG_0969.PNG"/>
                <div class="real" style="oopacity:0.5;">
                    <div id="steak_big"></div>

                    <div id="co2_text" class="text_top_left">COx emissions</div>
                    <div id="co_bubble_container">
                        <div id="co_bubble_path_container">
                            <div class="co2_bubble" style="--delay:0s;">
                                <img class="co_bubble_text" src='../2-meat-problems/co2_font.svg' style="--delay:0s;">
                            </div>
                            <div class="co4_bubble" style="--delay:1.5s;">
                                <img class="co_bubble_text" src='../2-meat-problems/co4_font.svg' style="--delay:1.5s;">
                            </div>
                            <div class="co2_bubble" style="--delay:3s;">
                                <img class="co_bubble_text" src='../2-meat-problems/co2_font.svg' style="--delay:3s;">
                            </div>
                            <div class="co4_bubble" style="--delay:4.5s;">
                                <img class="co_bubble_text" src='../2-meat-problems/co4_font.svg' style="--delay:4.5s;">
                            </div>
                        </div>
                    </div>

                    <div id="deforestation_text" class="text_bottom_left">Deforestation</div>

                    <div id="antibiotic_text" class="text_top_right">Antibiotic resistance</div>
                    <div id="syringe_container">
                        <div id="antibiotic_syringe_body"></div>
                        <div id="antibiotic_syringe_top"></div>
                        <div id="antibiotic_syringe_fluid"></div>
                    </div>

                    <div id="factory_text" class="text_bottom_right">Factory Farming</div>
                </div>
            </div>
            <div class="panel">
                <img class="reference_image" src="IMG_0970.PNG"/>
            </div>
            <div class="panel">
                <img class="reference_image" src="IMG_0971.PNG"/>
            </div>
            <div class="panel">
                <img class="reference_image" src="IMG_0972.PNG"/>
            </div>
        </main>
        <script>
            let animation_functions=[]
            let disable_complex_animations=true
            const cap_framerate=60

            let grass_front=document.getElementById('grass_front')
            grass_front.innerHTML=grass_front_svg

            const warp_front = new Warp(grass_front.children[0])
            let offset_front = 0
            const offset_front_delta=1.25/cap_framerate
            const amplitude=0.15
            const phase_multiplier=0.035
            function animate_front_grass(){
                warp_front.transform(([ x, y ]) => [ x+amplitude*Math.sin(phase_multiplier*y+offset_front), y])
                offset_front += offset_front_delta
            }
            animation_functions.push(animate_front_grass)

            function animate_all(){
                for(fun of animation_functions){
                    fun()
                }
            }
            if(!disable_complex_animations){
                setInterval(animate_all,1000/cap_framerate)
            }else{
                animate_all()
            }
        </script>
    </body>
</html>